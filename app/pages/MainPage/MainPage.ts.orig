import {NavController} from 'ionic-angular';
import {PostPage} from '../PostPage/PostPage';
<<<<<<< 1410d1b7fca8c78633b19438165c816c543dbff8
import {Observable} from 'rxjs';
import {AsyncPipe} from '@angular/common';
=======
import {Component, Inject} from '@angular/core';

import {bindActionCreators} from 'redux';
>>>>>>> updated to ionic 2.0.0-beta.8

import {postsActions} from '../../actions/postsActions';
import {dummyActions} from '../../actions/dummyActions';
import {NgRedux} from 'ng2-redux';

<<<<<<< 1410d1b7fca8c78633b19438165c816c543dbff8
@Page({
=======
@Component({
  providers: [],
>>>>>>> updated to ionic 2.0.0-beta.8
  templateUrl: 'build/pages/MainPage/template.html',
  pipes: [AsyncPipe]
})
export class MainPage {
  postPage: any = PostPage;
  posts$: Observable<any>;
  status$: Observable<any>;

  constructor(private nav: NavController, private ngRedux: NgRedux<any>) {}

  ngOnInit() {
    this.status$ = this.ngRedux.select(state=> state.getIn(["posts", "status"]));
    this.posts$ = this.ngRedux.select(state=> state.getIn(["posts", 'items']).toArray());

    this.ngRedux.dispatch(<any>postsActions.fetchPosts())
    this.ngRedux.dispatch(<any>dummyActions.fetchDummy())
  }

  selectPost(post:any):void {
    this.nav.push(this.postPage, {post: post})
  }
}
